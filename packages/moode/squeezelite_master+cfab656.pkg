# squeezelite_master+cfab656
PKG_URL="https://github.com/ralph-irving/squeezelite/archive/cfab656ad404305ae4ee36a724fb08fa756eddc0.tar.gz"
BUILD_PROCESS=simplemake
INST_CMD=all
PKG_DEPS="moode/wiringpi_2.50+7f8fe26 \
    moode/ffmpeg_4.4 \
    moode/libogg_1.3.5 \
    moode/libvorbis_1.3.7 \
    moode/opus_1.3.1 \
    moode/opusfile_0.12 \
    raspbian/libsoxr_0.1.3-1 \
    moode/mpg123_1.29.2 \
    moode/libmad_0.15.1b \
    moode/faad2_2.10.0"
PKG_CFLAGS="-fPIC -I${BIN_PATH}${BUILD_INCLUDEDIR}/opus -I${BIN_PATH}${BUILD_INCLUDEDIR}/alac"
PKG_LDFLAGS="-lgomp -lasound"
PKG_MAKEVARS='OPTS="-DOPUS -DALAC -DRESAMPLE -DFFMPEG -DVISEXPORT -DDSD -DGPIO -DRPI -DUSE_SSL -DLINKALL" PREFIX=${BUILD_PREFIX} EXECUTABLE=squeezelite'
PKG_POSTBUILD="install -m 0755 -d ${PKG_PKGPATH}\${BUILD_EXECPREFIX}/bin
install -m 0755 squeezelite ${PKG_PKGPATH}\${BUILD_EXECPREFIX}/bin/squeezelite
install -d ${PKG_PKGPATH}/usr/local/bin
ln -fs /usr/bin/squeezelite ${PKG_PKGPATH}/usr/local/bin/squeezelite"
